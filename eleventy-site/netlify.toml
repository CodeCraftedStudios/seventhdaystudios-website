[build]
  command = "npm install && npm run build"
  publish = "_site"

[build.environment]
  NODE_VERSION = "18"

# Redirect old .html URLs to new clean URLs
[[redirects]]
  from = "/index.html"
  to = "/"
  status = 301

[[redirects]]
  from = "/about.html"
  to = "/about/"
  status = 301

[[redirects]]
  from = "/games.html"
  to = "/games/"
  status = 301

[[redirects]]
  from = "/blog.html"
  to = "/blog/"
  status = 301

[[redirects]]
  from = "/community.html"
  to = "/community/"
  status = 301

[[redirects]]
  from = "/contact.html"
  to = "/contact/"
  status = 301

# Headers for security
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-XSS-Protection = "1; mode=block"
    X-Content-Type-Options = "nosniff"

# Enable Netlify Identity
[build.processing]
  skip_processing = false

[build.processing.html]
  pretty_urls = true
